# C4 Model Diagram | C4 模型图

**官方文档**: https://plantuml.com/zh/c4

## Instructions

C4 model diagrams show software architecture at different levels of abstraction. They use the C4-PlantUML library to create Context, Container, Component, and Deployment diagrams.

## Key Concepts

- Use `@startuml` and `@enduml` to wrap the diagram
- Include C4-PlantUML library with `!include`
- Use `Person`, `System`, `SystemDb`, `System_Ext`, `SystemDb_Ext` for Context diagrams
- Use `Container`, `ContainerDb`, `Container_Ext`, `ContainerDb_Ext` for Container diagrams
- Use `Component`, `ComponentDb`, `Component_Ext`, `ComponentDb_Ext` for Component diagrams
- Use `Deployment_Node` for Deployment diagrams
- Use `Rel` for relationships

## Example: C4 Context Diagram

```plantuml
@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Context.puml

LAYOUT_WITH_LEGEND()

Person(user, "User", "Uses the system")
System(system, "E-Commerce System", "Handles online orders")
System_Ext(payment, "Payment Gateway", "Processes payments")
System_Ext(email, "Email System", "Sends notifications")

Rel(user, system, "Places orders")
Rel(system, payment, "Processes payments")
Rel(system, email, "Sends order confirmations")
@enduml
```

## Example: C4 Container Diagram

```plantuml
@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Container.puml

LAYOUT_WITH_LEGEND()

Person(user, "User", "Uses the web application")
System_Boundary(c1, "E-Commerce System") {
    Container(web, "Web Application", "React", "Provides web interface")
    Container(api, "API", "Spring Boot", "Handles business logic")
    ContainerDb(db, "Database", "PostgreSQL", "Stores data")
}

System_Ext(email, "Email System", "Sends notifications")

Rel(user, web, "Uses", "HTTPS")
Rel(web, api, "Makes API calls", "HTTPS")
Rel(api, db, "Reads from and writes to", "JDBC")
Rel(api, email, "Sends emails", "SMTP")
@enduml
```

## Example: C4 Component Diagram

```plantuml
@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Component.puml

LAYOUT_WITH_LEGEND()

Container_Boundary(api, "API") {
    Component(controller, "Order Controller", "Spring MVC", "Handles HTTP requests")
    Component(service, "Order Service", "Spring", "Business logic")
    Component(repository, "Order Repository", "Spring Data", "Data access")
}

ContainerDb(db, "Database", "PostgreSQL", "Stores orders")

Rel(controller, service, "Uses")
Rel(service, repository, "Uses")
Rel(repository, db, "Reads from and writes to", "JDBC")
@enduml
```

## Example: C4 Deployment Diagram

```plantuml
@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Deployment.puml

LAYOUT_WITH_LEGEND()

Deployment_Node(aws, "AWS Cloud", "Cloud infrastructure") {
    Deployment_Node(web_tier, "Web Tier", "EC2") {
        Container(web, "Web Application", "React", "Serves web pages")
    }
    
    Deployment_Node(app_tier, "Application Tier", "EC2") {
        Container(api, "API", "Spring Boot", "Handles business logic")
    }
    
    Deployment_Node(db_tier, "Database Tier", "RDS") {
        ContainerDb(db, "Database", "PostgreSQL", "Stores data")
    }
}

Rel(web, api, "HTTPS")
Rel(api, db, "JDBC")
@enduml
```

## Key Points

- Always include the C4-PlantUML library with `!include`
- Use `LAYOUT_WITH_LEGEND()` for better diagram layout
- Use appropriate C4 elements for each diagram level
- Use `Rel` to define relationships between elements
- C4 diagrams are ideal for software architecture documentation
- Context diagrams show the big picture
- Container diagrams show the high-level structure
- Component diagrams show the internal structure
- Deployment diagrams show the infrastructure
