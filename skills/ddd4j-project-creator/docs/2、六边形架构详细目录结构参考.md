# å…­è¾¹å½¢æ¶æ„ï¼ˆç«¯å£å’Œé€‚é…å™¨ï¼‰ç›®å½•ç»“æ„

## ğŸ“‹ ç›®å½•

1. [å•ä½“å·¥ç¨‹ç›®å½•ç»“æ„](#å•ä½“å·¥ç¨‹ç›®å½•ç»“æ„)
2. [å¤§å‹å¾®æœåŠ¡å·¥ç¨‹ç›®å½•ç»“æ„](#å¤§å‹å¾®æœåŠ¡å·¥ç¨‹ç›®å½•ç»“æ„)
3. [æ¶æ„åŸåˆ™ä¸ä¾èµ–å…³ç³»](#æ¶æ„åŸåˆ™ä¸ä¾èµ–å…³ç³»)
4. [å…­è¾¹å½¢æ¶æ„æ ¸å¿ƒæ¦‚å¿µ](#å…­è¾¹å½¢æ¶æ„æ ¸å¿ƒæ¦‚å¿µ)

---

## ğŸ¢ å•ä½“å·¥ç¨‹ç›®å½•ç»“æ„

**é€‚ç”¨åœºæ™¯**: ä¸­å°å‹é¡¹ç›®ï¼Œå•ä¸€é™ç•Œä¸Šä¸‹æ–‡ï¼Œéœ€è¦æ¸…æ™°çš„æŠ€æœ¯éš”ç¦»

```
order-service/                                    # è®¢å•æœåŠ¡ï¼ˆå•ä½“åº”ç”¨ï¼‰
â”œâ”€â”€ ğŸ“ src/
â”‚   â”œâ”€â”€ ğŸ“ main/
â”‚   â”‚   â”œâ”€â”€ ğŸ“ java/io/ddd4j/order/
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ application/                  # åº”ç”¨å±‚ï¼ˆç”¨ä¾‹å±‚ï¼‰
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ ports/                    # ç«¯å£å®šä¹‰ï¼ˆæ¥å£ï¼‰
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ inbound/             # å…¥ç«™ç«¯å£ï¼ˆé©±åŠ¨ç«¯ï¼‰
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ IOrderService.java          # è®¢å•æœåŠ¡ç«¯å£
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ createOrder(CreateOrderCmd): OrderId
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ getOrder(OrderId): Order
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ cancelOrder(OrderId): void
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ICustomerService.java       # å®¢æˆ·æœåŠ¡ç«¯å£
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ IPaymentService.java        # æ”¯ä»˜æœåŠ¡ç«¯å£
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ outbound/            # å‡ºç«™ç«¯å£ï¼ˆè¢«é©±åŠ¨ç«¯ï¼‰
â”‚   â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ IOrderRepository.java       # è®¢å•ä»“å‚¨ç«¯å£
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ save(Order): void
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ findById(OrderId): Order
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚   â””â”€â”€ findByCustomer(CustomerId): List<Order>
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚
â”‚   â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ ICustomerRepository.java    # å®¢æˆ·ä»“å‚¨ç«¯å£
â”‚   â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ IProductRepository.java     # äº§å“ä»“å‚¨ç«¯å£
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚
â”‚   â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ IPaymentProvider.java       # æ”¯ä»˜æä¾›å•†ç«¯å£
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚   â””â”€â”€ processPayment(PaymentInfo): PaymentResult
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚
â”‚   â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ INotificationService.java   # é€šçŸ¥æœåŠ¡ç«¯å£
â”‚   â”‚   â”‚   â”‚   â”‚       â””â”€â”€ IEventPublisher.java        # äº‹ä»¶å‘å¸ƒç«¯å£
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ services/                 # åº”ç”¨æœåŠ¡å®ç°
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderServiceImpl.java          # å®ç°IOrderService
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ @Service
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ implements IOrderService
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CustomerServiceImpl.java        # å®ç°ICustomerService
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ PaymentServiceImpl.java         # å®ç°IPaymentService
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ usecases/                 # å…·ä½“ç”¨ä¾‹
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ order/                    # è®¢å•ç”¨ä¾‹
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CreateOrderUseCase.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ execute(CreateOrderCmd): OrderId
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ validate(CreateOrderCmd): void
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProcessOrderUseCase.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ CancelOrderUseCase.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ customer/                # å®¢æˆ·ç”¨ä¾‹
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RegisterCustomerUseCase.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ValidateCustomerUseCase.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ dto/                      # ç”¨ä¾‹DTO
â”‚   â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ CreateOrderCmd.java
â”‚   â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ OrderDTO.java
â”‚   â”‚   â”‚   â”‚   â”‚       â””â”€â”€ PaymentDTO.java
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ exception/                # åº”ç”¨å±‚å¼‚å¸¸
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ ApplicationException.java
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ ValidationException.java
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ BusinessRuleException.java
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ domain/                       # é¢†åŸŸå±‚ï¼ˆæ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼‰
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ model/                    # é¢†åŸŸæ¨¡å‹/å®ä½“
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Order.java                # è®¢å•èšåˆæ ¹
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderId
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CustomerId
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ List<OrderItem>
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderStatus
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Money
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ place()
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ pay()
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ cancel()
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderItem.java            # è®¢å•é¡¹
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Customer.java             # å®¢æˆ·å®ä½“
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Product.java              # äº§å“å®ä½“
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ valueobject/              # å€¼å¯¹è±¡
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderId.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CustomerId.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Money.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ amount: BigDecimal
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ currency: Currency
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ add(Money): Money
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ equals(): boolean
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Email.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PhoneNumber.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Address.java
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Quantity.java
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ event/                    # é¢†åŸŸäº‹ä»¶
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DomainEvent.java         # åŸºç¡€äº‹ä»¶æ¥å£
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ occurredOn(): Instant
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ getAggregateId(): String
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderCreatedEvent.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderPaidEvent.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderCancelledEvent.java
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ CustomerRegisteredEvent.java
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ service/                  # é¢†åŸŸæœåŠ¡
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderValidationService.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PricingService.java
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ InventoryService.java
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ exception/                # é¢†åŸŸå¼‚å¸¸
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ DomainException.java
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ InvalidStateException.java
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ infrastructure/               # åŸºç¡€è®¾æ–½å±‚ï¼ˆé€‚é…å™¨å®ç°ï¼‰
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ adapter/                  # é€‚é…å™¨å®ç°
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ inbound/             # å…¥ç«™é€‚é…å™¨ï¼ˆé©±åŠ¨é€‚é…å™¨ï¼‰
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ web/             # Webé€‚é…å™¨
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ controller/
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderController.java           # RESTæ§åˆ¶å™¨
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ @RestController
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ @RequestMapping("/api/orders")
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ implements IOrderService
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CustomerController.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ PaymentController.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ dto/         # è¯·æ±‚/å“åº”DTO
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ request/
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CreateOrderRequest.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ UpdateOrderRequest.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ response/
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ OrderResponse.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚       â””â”€â”€ ApiResponse.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ filter/      # Webè¿‡æ»¤å™¨
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AuthenticationFilter.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ LoggingFilter.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ CorsFilter.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ interceptor/ # æ‹¦æˆªå™¨
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ PerformanceInterceptor.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ exception/   # å¼‚å¸¸å¤„ç†
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ GlobalExceptionHandler.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚       â””â”€â”€ ErrorResponse.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ cli/         # å‘½ä»¤è¡Œé€‚é…å™¨
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ CommandLineInterface.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ messaging/   # æ¶ˆæ¯é€‚é…å™¨
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderMessageConsumer.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ EventSubscriber.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ scheduled/   # å®šæ—¶ä»»åŠ¡é€‚é…å™¨
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚       â””â”€â”€ OrderCleanupScheduler.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ outbound/        # å‡ºç«™é€‚é…å™¨ï¼ˆè¢«é©±åŠ¨é€‚é…å™¨ï¼‰
â”‚   â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“ persistence/  # æŒä¹…åŒ–é€‚é…å™¨
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ ğŸ“ repositoryimpl/
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ OrderRepositoryImpl.java    # å®ç°IOrderRepository
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ CustomerRepositoryImpl.java
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚   â”‚   â””â”€â”€ ProductRepositoryImpl.java
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ ğŸ“ mapper/
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ OrderMapper.java           # MyBatis Mapper
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚   â”‚   â””â”€â”€ OrderDataMapper.java      # DO<->Entityè½¬æ¢
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚   â””â”€â”€ ğŸ“ entity/
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚       â”œâ”€â”€ OrderEntity.java           # JPA/MyBatiså®ä½“
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚       â”œâ”€â”€ CustomerEntity.java
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚       â””â”€â”€ ProductEntity.java
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚
â”‚   â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“ external/     # å¤–éƒ¨æœåŠ¡é€‚é…å™¨
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ PaymentProviderAdapter.java   # å®ç°IPaymentProvider
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ @Service
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚   â”‚   â””â”€â”€ implements IPaymentProvider
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ EmailServiceAdapter.java     # å®ç°INotificationService
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ SMSServiceAdapter.java
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚   â”‚   â””â”€â”€ ThirdPartyApiClient.java
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚
â”‚   â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“ messaging/   # æ¶ˆæ¯é€‚é…å™¨
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ EventPublisherAdapter.java   # å®ç°IEventPublisher
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ MessageProducer.java
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚   â””â”€â”€ QueueSender.java
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚
â”‚   â”‚   â”‚   â”‚   â”‚       â””â”€â”€ ğŸ“ cache/       # ç¼“å­˜é€‚é…å™¨
â”‚   â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ RedisCacheAdapter.java
â”‚   â”‚   â”‚   â”‚   â”‚           â””â”€â”€ LocalCacheAdapter.java
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ config/                   # é…ç½®ç±»
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DatabaseConfig.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ WebConfig.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SecurityConfig.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CacheConfig.java
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ BeanConfig.java
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ database/                 # æ•°æ®åº“ç›¸å…³
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ migration/
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ V1__init.sql
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ V2__add_orders.sql
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ enums/
â”‚   â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ OrderStatus.java
â”‚   â”‚   â”‚   â”‚   â”‚       â””â”€â”€ UserRole.java
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ security/                 # å®‰å…¨ç›¸å…³
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ JwtTokenProvider.java
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ PasswordEncoder.java
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ SecurityUtils.java
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ shared/                       # å…±äº«ç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ kernel/                   # æ ¸å¿ƒå…±äº«
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ BaseEntity.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AggregateRoot.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ValueObject.java
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Identifier.java
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ util/                     # å·¥å…·ç±»
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DateUtils.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ StringUtils.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Validator.java
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ObjectMapperUtils.java
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ constants/                # å¸¸é‡å®šä¹‰
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AppConstants.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ErrorCodes.java
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ValidationMessages.java
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ exception/                # å…¨å±€å¼‚å¸¸
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ GlobalException.java
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ ErrorResponse.java
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ ExceptionHandler.java
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ OrderApplication.java           # åº”ç”¨å¯åŠ¨ç±»
â”‚   â”‚   â”‚       â”œâ”€â”€ @SpringBootApplication
â”‚   â”‚   â”‚       â””â”€â”€ main(String[] args)
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ ğŸ“ resources/
â”‚   â”‚       â”œâ”€â”€ application.yml
â”‚   â”‚       â”œâ”€â”€ application-dev.yml
â”‚   â”‚       â”œâ”€â”€ application-prod.yml
â”‚   â”‚       â”œâ”€â”€ ğŸ“ db/
â”‚   â”‚       â”‚   â”œâ”€â”€ migration/
â”‚   â”‚       â”‚   â””â”€â”€ seed/
â”‚   â”‚       â”œâ”€â”€ ğŸ“ i18n/
â”‚   â”‚       â”‚   â”œâ”€â”€ messages.properties
â”‚   â”‚       â”‚   â””â”€â”€ messages_zh.properties
â”‚   â”‚       â”œâ”€â”€ ğŸ“ templates/
â”‚   â”‚       â”‚   â””â”€â”€ email/
â”‚   â”‚       â”œâ”€â”€ logback-spring.xml
â”‚   â”‚       â””â”€â”€ banner.txt
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ test/
â”‚       â”œâ”€â”€ ğŸ“ unit/
â”‚       â”‚   â”œâ”€â”€ ğŸ“ domain/
â”‚       â”‚   â”‚   â”œâ”€â”€ OrderTest.java
â”‚       â”‚   â”‚   â””â”€â”€ MoneyTest.java
â”‚       â”‚   â”œâ”€â”€ ğŸ“ application/
â”‚       â”‚   â”‚   â””â”€â”€ CreateOrderUseCaseTest.java
â”‚       â”‚   â””â”€â”€ ğŸ“ infrastructure/
â”‚       â”‚       â””â”€â”€ OrderRepositoryImplTest.java
â”‚       â”‚
â”‚       â”œâ”€â”€ ğŸ“ integration/
â”‚       â”‚   â””â”€â”€ OrderIntegrationTest.java
â”‚       â”‚
â”‚       â””â”€â”€ ğŸ“ e2e/
â”‚           â””â”€â”€ ApiE2ETest.java
â”‚
â”œâ”€â”€ ğŸ“ docker/
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ docker-compose.yml
â”‚
â”œâ”€â”€ pom.xml
â”œâ”€â”€ README.md
â””â”€â”€ .gitignore
```

---

## ğŸ¢ å¤§å‹å¾®æœåŠ¡å·¥ç¨‹ç›®å½•ç»“æ„

**é€‚ç”¨åœºæ™¯**: å¤§å‹ä¼ä¸šé¡¹ç›®ï¼Œå¤šé™ç•Œä¸Šä¸‹æ–‡ï¼Œéœ€è¦ç‹¬ç«‹éƒ¨ç½²å’ŒæŠ€æœ¯éš”ç¦»

```
ecommerce-platform/                                  # ç”µå•†å¹³å°ï¼ˆå¾®æœåŠ¡çˆ¶å·¥ç¨‹ï¼‰
â”‚
â”œâ”€â”€ ğŸ“ order-service/                              # è®¢å•æœåŠ¡ï¼ˆç‹¬ç«‹å¾®æœåŠ¡ï¼‰
â”‚   â”œâ”€â”€ ğŸ“ order-api/                              # APIæ¨¡å—ï¼ˆç«¯å£å®šä¹‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ ğŸ“ src/main/java/io/ddd4j/order/api/
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ ports/                          # ç«¯å£æ¥å£
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ inbound/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ IOrderService.java         # è®¢å•æœåŠ¡ç«¯å£
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ICustomerService.java
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ IPaymentService.java
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ outbound/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ IOrderRepository.java      # ä»“å‚¨ç«¯å£
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ ICustomerRepository.java
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ IPaymentProvider.java      # æ”¯ä»˜ç«¯å£
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ IEventPublisher.java       # äº‹ä»¶å‘å¸ƒç«¯å£
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ dto/                            # API DTO
â”‚   â”‚   â”‚       â”œâ”€â”€ CreateOrderCmd.java
â”‚   â”‚   â”‚       â”œâ”€â”€ OrderDTO.java
â”‚   â”‚   â”‚       â””â”€â”€ OrderItemDTO.java
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ pom.xml
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ order-domain/                           # é¢†åŸŸæ¨¡å—ï¼ˆæ ¸å¿ƒä¸šåŠ¡ï¼‰
â”‚   â”‚   â”œâ”€â”€ ğŸ“ src/main/java/io/ddd4j/order/domain/
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ model/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Order.java                     # èšåˆæ ¹
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderItem.java
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Customer.java
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Product.java
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ valueobject/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderId.java
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Money.java
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Email.java
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ event/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderCreatedEvent.java
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ OrderPaidEvent.java
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ service/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ OrderValidationService.java
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ exception/
â”‚   â”‚   â”‚       â””â”€â”€ DomainException.java
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ pom.xml
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ order-application/                      # åº”ç”¨æ¨¡å—ï¼ˆç”¨ä¾‹å®ç°ï¼‰
â”‚   â”‚   â”œâ”€â”€ ğŸ“ src/main/java/io/ddd4j/order/application/
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ services/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderServiceImpl.java           # å®ç°IOrderService
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ CustomerServiceImpl.java
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ usecases/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CreateOrderUseCase.java
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProcessOrderUseCase.java
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ CancelOrderUseCase.java
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ exception/
â”‚   â”‚   â”‚       â””â”€â”€ ApplicationException.java
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ pom.xml
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ order-infrastructure/                   # åŸºç¡€è®¾æ–½æ¨¡å—ï¼ˆé€‚é…å™¨å®ç°ï¼‰
â”‚   â”‚   â”œâ”€â”€ ğŸ“ src/main/java/io/ddd4j/order/infrastructure/
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ adapter/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ inbound/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ web/
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderController.java   # RESTé€‚é…å™¨
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ dto/
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ messaging/
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ OrderEventConsumer.java  # æ¶ˆæ¯é€‚é…å™¨
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ cli/
â”‚   â”‚   â”‚   â”‚   â”‚       â””â”€â”€ CommandLineAdapter.java
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ outbound/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“ persistence/
â”‚   â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ OrderRepositoryImpl.java    # æŒä¹…åŒ–é€‚é…å™¨
â”‚   â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ OrderMapper.java
â”‚   â”‚   â”‚   â”‚       â”‚   â””â”€â”€ OrderEntity.java
â”‚   â”‚   â”‚   â”‚       â”‚
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“ external/
â”‚   â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ PaymentProviderAdapter.java   # å¤–éƒ¨æœåŠ¡é€‚é…å™¨
â”‚   â”‚   â”‚   â”‚       â”‚   â””â”€â”€ EmailServiceAdapter.java
â”‚   â”‚   â”‚   â”‚       â”‚
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ ğŸ“ messaging/
â”‚   â”‚   â”‚   â”‚           â””â”€â”€ EventPublisherAdapter.java   # æ¶ˆæ¯å‘å¸ƒé€‚é…å™¨
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ config/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DatabaseConfig.java
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ WebConfig.java
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ SecurityConfig.java
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ security/
â”‚   â”‚   â”‚       â””â”€â”€ JwtTokenProvider.java
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ pom.xml
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ order-start/                             # å¯åŠ¨æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ ğŸ“ src/main/java/io/ddd4j/order/
â”‚   â”‚   â”‚   â””â”€â”€ OrderApplication.java
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“ src/main/resources/
â”‚   â”‚   â”‚   â”œâ”€â”€ application.yml
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ mapper/
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ pom.xml
â”‚   â”‚
â”‚   â””â”€â”€ pom.xml                                     # è®¢å•æœåŠ¡çˆ¶POM
â”‚
â”œâ”€â”€ ğŸ“ customer-service/                           # å®¢æˆ·æœåŠ¡ï¼ˆç‹¬ç«‹å¾®æœåŠ¡ï¼‰
â”‚   â”œâ”€â”€ ğŸ“ customer-api/                           # å®¢æˆ·APIæ¨¡å—
â”‚   â”‚   â””â”€â”€ ğŸ“ src/main/java/io/ddd4j/customer/api/
â”‚   â”‚       â”œâ”€â”€ ğŸ“ ports/
â”‚   â”‚       â”‚   â”œâ”€â”€ ICustomerService.java
â”‚   â”‚       â”‚   â””â”€â”€ ICustomerRepository.java
â”‚   â”‚       â””â”€â”€ ğŸ“ dto/
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ customer-domain/                        # å®¢æˆ·é¢†åŸŸæ¨¡å—
â”‚   â”‚   â””â”€â”€ ğŸ“ src/main/java/io/ddd4j/customer/domain/
â”‚   â”‚       â”œâ”€â”€ ğŸ“ model/
â”‚   â”‚       â”‚   â””â”€â”€ Customer.java
â”‚   â”‚       â””â”€â”€ ğŸ“ valueobject/
â”‚   â”‚           â””â”€â”€ Email.java
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ customer-application/                   # å®¢æˆ·åº”ç”¨æ¨¡å—
â”‚   â”‚   â””â”€â”€ ğŸ“ src/main/java/io/ddd4j/customer/application/
â”‚   â”‚       â””â”€â”€ ğŸ“ services/
â”‚   â”‚           â””â”€â”€ CustomerServiceImpl.java
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ customer-infrastructure/               # å®¢æˆ·åŸºç¡€è®¾æ–½æ¨¡å—
â”‚   â”‚   â””â”€â”€ ğŸ“ src/main/java/io/ddd4j/customer/infrastructure/
â”‚   â”‚       â””â”€â”€ ğŸ“ adapter/
â”‚   â”‚           â”œâ”€â”€ ğŸ“ inbound/
â”‚   â”‚           â”‚   â””â”€â”€ ğŸ“ web/
â”‚   â”‚           â”‚       â””â”€â”€ CustomerController.java
â”‚   â”‚           â””â”€â”€ ğŸ“ outbound/
â”‚   â”‚               â””â”€â”€ ğŸ“ persistence/
â”‚   â”‚                   â””â”€â”€ CustomerRepositoryImpl.java
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ customer-start/                         # å®¢æˆ·å¯åŠ¨æ¨¡å—
â”‚   â”‚   â””â”€â”€ ğŸ“ src/main/java/io/ddd4j/customer/
â”‚   â”‚       â””â”€â”€ CustomerApplication.java
â”‚   â”‚
â”‚   â””â”€â”€ pom.xml
â”‚
â”œâ”€â”€ ğŸ“ payment-service/                            # æ”¯ä»˜æœåŠ¡ï¼ˆç‹¬ç«‹å¾®æœåŠ¡ï¼‰
â”‚   â”œâ”€â”€ ğŸ“ payment-api/
â”‚   â”œâ”€â”€ ğŸ“ payment-domain/
â”‚   â”œâ”€â”€ ğŸ“ payment-application/
â”‚   â”œâ”€â”€ ğŸ“ payment-infrastructure/
â”‚   â””â”€â”€ ğŸ“ payment-start/
â”‚
â”œâ”€â”€ ğŸ“ product-service/                            # äº§å“æœåŠ¡ï¼ˆç‹¬ç«‹å¾®æœåŠ¡ï¼‰
â”‚   â”œâ”€â”€ ğŸ“ product-api/
â”‚   â”œâ”€â”€ ğŸ“ product-domain/
â”‚   â”œâ”€â”€ ğŸ“ product-application/
â”‚   â”œâ”€â”€ ğŸ“ product-infrastructure/
â”‚   â””â”€â”€ ğŸ“ product-start/
â”‚
â”œâ”€â”€ ğŸ“ shared-kernel/                              # å…±äº«å†…æ ¸
â”‚   â”œâ”€â”€ ğŸ“ shared-domain/                          # å…±äº«é¢†åŸŸæ¨¡å—
â”‚   â”‚   â””â”€â”€ ğŸ“ src/main/java/io/ddd4j/shared/domain/
â”‚   â”‚       â”œâ”€â”€ ğŸ“ model/
â”‚   â”‚       â”‚   â”œâ”€â”€ Money.java
â”‚   â”‚       â”‚   â””â”€â”€ Email.java
â”‚   â”‚       â””â”€â”€ ğŸ“ event/
â”‚   â”‚           â””â”€â”€ DomainEvent.java
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ shared-infrastructure/                  # å…±äº«åŸºç¡€è®¾æ–½
â”‚   â”‚   â””â”€â”€ ğŸ“ src/main/java/io/ddd4j/shared/infrastructure/
â”‚   â”‚       â”œâ”€â”€ ğŸ“ config/
â”‚   â”‚       â”‚   â””â”€â”€ CommonConfig.java
â”‚   â”‚       â””â”€â”€ ğŸ“ util/
â”‚   â”‚           â””â”€â”€ JsonUtils.java
â”‚   â”‚
â”‚   â””â”€â”€ pom.xml
â”‚
â”œâ”€â”€ ğŸ“ gateway/                                    # APIç½‘å…³
â”‚   â””â”€â”€ ğŸ“ src/main/java/io/ddd4j/gateway/
â”‚       â”œâ”€â”€ GatewayApplication.java
â”‚       â””â”€â”€ ğŸ“ filter/
â”‚           â”œâ”€â”€ AuthFilter.java
â”‚           â””â”€â”€ RateLimitFilter.java
â”‚
â”œâ”€â”€ ğŸ“ docker/                                     # Dockerç¼–æ’
â”‚   â”œâ”€â”€ docker-compose.yml
â”‚   â””â”€â”€ ğŸ“ docker/
â”‚       â”œâ”€â”€ order-service/
â”‚       â”œâ”€â”€ customer-service/
â”‚       â””â”€â”€ gateway/
â”‚
â”œâ”€â”€ ğŸ“ k8s/                                        # Kubernetesé…ç½®
â”‚   â”œâ”€â”€ ğŸ“ order-service/
â”‚   â”‚   â”œâ”€â”€ deployment.yaml
â”‚   â”‚   â””â”€â”€ service.yaml
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ customer-service/
â”‚   â””â”€â”€ ğŸ“ gateway/
â”‚
â”œâ”€â”€ pom.xml                                        # çˆ¶POM
â”œâ”€â”€ README.md
â””â”€â”€ .gitignore
```

---

## ğŸ— æ¶æ„åŸåˆ™ä¸ä¾èµ–å…³ç³»

### å…­è¾¹å½¢æ¶æ„æ ¸å¿ƒåŸåˆ™

```
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚         åº”ç”¨å±‚ï¼ˆApplicationï¼‰          â”‚
         â”‚  - ç”¨ä¾‹ï¼ˆUse Casesï¼‰                 â”‚
         â”‚  - åº”ç”¨æœåŠ¡ï¼ˆApplication Servicesï¼‰   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†‘           â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                    ç«¯å£ï¼ˆPortsï¼‰                    â”‚
    â”‚         - å…¥ç«™ç«¯å£ï¼ˆInbound/Drivingï¼‰              â”‚
    â”‚         - å‡ºç«™ç«¯å£ï¼ˆOutbound/Drivenï¼‰              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†‘           â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                é€‚é…å™¨ï¼ˆAdaptersï¼‰                  â”‚
    â”‚  - å…¥ç«™é€‚é…å™¨ï¼šWebã€CLIã€Messaging               â”‚
    â”‚  - å‡ºç«™é€‚é…å™¨ï¼šDatabaseã€External APIã€Cache     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¾èµ–è§„åˆ™

```
é€‚é…å™¨ï¼ˆAdaptersï¼‰ â†’ ç«¯å£ï¼ˆPortsï¼‰ â† åº”ç”¨å±‚ï¼ˆApplicationï¼‰ â† é¢†åŸŸå±‚ï¼ˆDomainï¼‰
```

- **é¢†åŸŸå±‚**ï¼šå®Œå…¨ç‹¬ç«‹ï¼Œæ— ä»»ä½•å¤–éƒ¨ä¾èµ–
- **åº”ç”¨å±‚**ï¼šä¾èµ–é¢†åŸŸå±‚ï¼Œå®šä¹‰ç«¯å£æ¥å£
- **åŸºç¡€è®¾æ–½å±‚**ï¼šå®ç°åº”ç”¨å±‚å®šä¹‰çš„ç«¯å£
- **é€‚é…å™¨**ï¼šé€šè¿‡ç«¯å£ä¸åº”ç”¨å±‚äº¤äº’

---

## ğŸ¯ å…­è¾¹å½¢æ¶æ„æ ¸å¿ƒæ¦‚å¿µ

### 1. ç«¯å£ï¼ˆPortsï¼‰

ç«¯å£æ˜¯åº”ç”¨ä¸å¤–éƒ¨ä¸–ç•Œäº¤äº’çš„æ¥å£ï¼Œåˆ†ä¸ºä¸¤ç±»ï¼š

#### å…¥ç«™ç«¯å£ï¼ˆInbound/Driving Portsï¼‰
å®šä¹‰åº”ç”¨å¯¹å¤–æä¾›çš„æœåŠ¡èƒ½åŠ›ï¼š

```java
// application/ports/inbound/IOrderService.java
public interface IOrderService {
    OrderId createOrder(CreateOrderCmd cmd);
    Order getOrder(OrderId id);
    void cancelOrder(OrderId id);
    List<Order> getCustomerOrders(CustomerId customerId);
}
```

#### å‡ºç«™ç«¯å£ï¼ˆOutbound/Driven Portsï¼‰
å®šä¹‰åº”ç”¨ä¾èµ–çš„å¤–éƒ¨æœåŠ¡ï¼š

```java
// application/ports/outbound/IOrderRepository.java
public interface IOrderRepository {
    void save(Order order);
    Optional<Order> findById(OrderId id);
    List<Order> findByCustomer(CustomerId customerId);
}

// application/ports/outbound/IPaymentProvider.java
public interface IPaymentProvider {
    PaymentResult processPayment(PaymentInfo paymentInfo);
}

// application/ports/outbound/IEventPublisher.java
public interface IEventPublisher {
    void publish(DomainEvent event);
}
```

### 2. é€‚é…å™¨ï¼ˆAdaptersï¼‰

é€‚é…å™¨æ˜¯ç«¯å£çš„å…·ä½“å®ç°ï¼Œåˆ†ä¸ºä¸¤ç±»ï¼š

#### å…¥ç«™é€‚é…å™¨ï¼ˆInbound/Driving Adaptersï¼‰
é©±åŠ¨åº”ç”¨æ‰§è¡Œçš„é€‚é…å™¨ï¼š

```java
// infrastructure/adapter/inbound/web/OrderController.java
@RestController
@RequestMapping("/api/orders")
public class OrderController implements IOrderService {

    private final IOrderService orderService; // æ³¨å…¥ç«¯å£

    @PostMapping
    public ResponseEntity<OrderResponse> createOrder(@RequestBody CreateOrderRequest request) {
        CreateOrderCmd cmd = toCommand(request);
        OrderId orderId = orderService.createOrder(cmd);
        return ResponseEntity.ok(new OrderResponse(orderId));
    }

    @GetMapping("/{id}")
    public ResponseEntity<OrderResponse> getOrder(@PathVariable String id) {
        Order order = orderService.getOrder(new OrderId(id));
        return ResponseEntity.ok(toResponse(order));
    }
}
```

#### å‡ºç«™é€‚é…å™¨ï¼ˆOutbound/Driven Adaptersï¼‰
è¢«åº”ç”¨è°ƒç”¨çš„é€‚é…å™¨ï¼š

```java
// infrastructure/adapter/outbound/persistence/OrderRepositoryImpl.java
@Repository
public class OrderRepositoryImpl implements IOrderRepository {

    private final OrderMapper orderMapper;

    @Override
    public void save(Order order) {
        OrderEntity entity = toEntity(order);
        orderMapper.insert(entity);
    }

    @Override
    public Optional<Order> findById(OrderId id) {
        OrderEntity entity = orderMapper.selectById(id.getValue());
        return Optional.ofNullable(toDomain(entity));
    }
}

// infrastructure/adapter/outbound/external/PaymentProviderAdapter.java
@Service
public class PaymentProviderAdapter implements IPaymentProvider {

    private final AlipayClient alipayClient;

    @Override
    public PaymentResult processPayment(PaymentInfo paymentInfo) {
        // è°ƒç”¨æ”¯ä»˜å®API
        return alipayClient.pay(paymentInfo);
    }
}
```

### 3. ç”¨ä¾‹ï¼ˆUse Casesï¼‰

ç”¨ä¾‹å°è£…ç‰¹å®šçš„ä¸šåŠ¡æµç¨‹ï¼š

```java
// application/usecases/order/CreateOrderUseCase.java
@Component
public class CreateOrderUseCase {

    private final IOrderRepository orderRepository;
    private final ICustomerRepository customerRepository;
    private final IProductRepository productRepository;
    private final IEventPublisher eventPublisher;

    public OrderId execute(CreateOrderCmd cmd) {
        // 1. éªŒè¯å®¢æˆ·
        Customer customer = customerRepository.findById(cmd.getCustomerId())
            .orElseThrow(() -> new CustomerNotFoundException(cmd.getCustomerId()));

        // 2. åˆ›å»ºè®¢å•
        Order order = Order.create(
            customer.getId(),
            cmd.getItems(),
            cmd.getShippingAddress()
        );

        // 3. ä¿å­˜è®¢å•
        orderRepository.save(order);

        // 4. å‘å¸ƒäº‹ä»¶
        eventPublisher.publish(new OrderCreatedEvent(
            order.getId(),
            customer.getId(),
            order.getTotalAmount()
        ));

        return order.getId();
    }
}
```

### 4. ä¾èµ–æ³¨å…¥é…ç½®

```java
// infrastructure/config/BeanConfig.java
@Configuration
public class BeanConfig {

    // å‡ºç«™é€‚é…å™¨Bean
    @Bean
    public IOrderRepository orderRepository(OrderMapper orderMapper) {
        return new OrderRepositoryImpl(orderMapper);
    }

    @Bean
    public IPaymentProvider paymentProvider(AlipayClient alipayClient) {
        return new PaymentProviderAdapter(alipayClient);
    }

    @Bean
    public IEventPublisher eventPublisher(KafkaTemplate<String, String> kafkaTemplate) {
        return new KafkaEventPublisherAdapter(kafkaTemplate);
    }

    // åº”ç”¨æœåŠ¡Bean
    @Bean
    public IOrderService orderService(
        IOrderRepository orderRepository,
        IPaymentProvider paymentProvider,
        IEventPublisher eventPublisher
    ) {
        return new OrderServiceImpl(
            orderRepository,
            paymentProvider,
            eventPublisher
        );
    }
}
```

---

## ğŸ“š æƒå¨å‚è€ƒ

### å…­è¾¹å½¢æ¶æ„åˆ›å§‹äºº
- **Alistair Cockburn** - å…­è¾¹å½¢æ¶æ„ï¼ˆç«¯å£å’Œé€‚é…å™¨ï¼‰åˆ›å§‹äºº

### æ ¸å¿ƒç†å¿µ
1. **éš”ç¦»é¢†åŸŸé€»è¾‘**ï¼šé¢†åŸŸå±‚å®Œå…¨ç‹¬ç«‹ï¼Œä¸ä¾èµ–ä»»ä½•æŠ€æœ¯å®ç°
2. **ç«¯å£éš”ç¦»**ï¼šé€šè¿‡ç«¯å£æ¥å£è§£è€¦åº”ç”¨ä¸å¤–éƒ¨ä¸–ç•Œ
3. **é€‚é…å™¨å¯æ›¿æ¢**ï¼šé€‚é…å™¨å¯ä»¥è½»æ¾æ›¿æ¢è€Œä¸å½±å“åº”ç”¨æ ¸å¿ƒ
4. **æµ‹è¯•å‹å¥½**ï¼šå¯ä»¥è½»æ¾mockç«¯å£è¿›è¡Œæµ‹è¯•

### æœ€ä½³å®è·µ

```java
// æµ‹è¯•ç¤ºä¾‹ï¼šä½¿ç”¨Mockç«¯å£
class CreateOrderUseCaseTest {

    @Test
    void should_create_order_successfully() {
        // Given: Mockå‡ºç«™ç«¯å£
        IOrderRepository mockRepo = mock(IOrderRepository.class);
        ICustomerRepository mockCustomerRepo = mock(ICustomerRepository.class);
        IEventPublisher mockPublisher = mock(IEventPublisher.class);

        // Setup mock behavior
        when(mockCustomerRepo.findById(any())).thenReturn(Optional.of(customer));

        // When: æ‰§è¡Œç”¨ä¾‹
        CreateOrderUseCase useCase = new CreateOrderUseCase(
            mockRepo, mockCustomerRepo, mockPublisher
        );
        OrderId orderId = useCase.execute(cmd);

        // Then: éªŒè¯äº¤äº’
        verify(mockRepo).save(any(Order.class));
        verify(mockPublisher).publish(any(OrderCreatedEvent.class));
    }
}
```

---

## ğŸ”„ ä¸å…¶ä»–æ¶æ„çš„å…³ç³»

### å…­è¾¹å½¢æ¶æ„ vs DDD åˆ†å±‚æ¶æ„

| æ–¹é¢ | å…­è¾¹å½¢æ¶æ„ | DDD åˆ†å±‚æ¶æ„ |
|------|-----------|-------------|
| æ ¸å¿ƒç†å¿µ | ç«¯å£å’Œé€‚é…å™¨ | é¢†åŸŸé©±åŠ¨è®¾è®¡ |
| ä¾èµ–æ–¹å‘ | é€‚é…å™¨ â†’ ç«¯å£ â† åº”ç”¨ | æ¥å£ â†’ åº”ç”¨ â†’ é¢†åŸŸ â† åŸºç¡€è®¾æ–½ |
| å…³æ³¨ç‚¹ | æŠ€æœ¯éš”ç¦» | ä¸šåŠ¡é¢†åŸŸå»ºæ¨¡ |
| é€‚ç”¨åœºæ™¯ | éœ€è¦æŠ€æœ¯æ›¿æ¢çš„åœºæ™¯ | å¤æ‚ä¸šåŠ¡é¢†åŸŸ |

### å…­è¾¹å½¢æ¶æ„ vs æ•´æ´æ¶æ„

- å…­è¾¹å½¢æ¶æ„æ˜¯æ•´æ´æ¶æ„çš„å‰èº«
- æ•´æ´æ¶æ„æ›´å¼ºè°ƒåŒå¿ƒåœ†å±‚æ¬¡ç»“æ„
- ä¸¤è€…éƒ½éµå¾ªä¾èµ–å€’ç½®åŸåˆ™

---

## ğŸ’¡ é€‰æ‹©å»ºè®®

### é€‰æ‹©å…­è¾¹å½¢æ¶æ„çš„åœºæ™¯ï¼š
1. éœ€è¦é¢‘ç¹æ›´æ¢æŠ€æœ¯å®ç°ï¼ˆå¦‚æ•°æ®åº“ã€æ¶ˆæ¯é˜Ÿåˆ—ï¼‰
2. å¤šç§é©±åŠ¨æ–¹å¼ï¼ˆWebã€CLIã€æ¶ˆæ¯ï¼‰
3. é«˜åº¦å¯æµ‹è¯•æ€§è¦æ±‚
4. æ¸…æ™°çš„æŠ€æœ¯è¾¹ç•Œéœ€æ±‚

### ä¸é€‰æ‹©å…­è¾¹å½¢æ¶æ„çš„åœºæ™¯ï¼š
1. ç®€å•CRUDåº”ç”¨
2. å›ºå®šæŠ€æœ¯æ ˆï¼Œä¸éœ€è¦æ›¿æ¢
3. å°å‹å›¢é˜Ÿï¼Œå¿«é€Ÿè¿­ä»£

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

```bash
# åˆ›å»ºå…­è¾¹å½¢æ¶æ„é¡¹ç›®
mvn archetype:generate \
  -DarchetypeGroupId=io.ddd4j.boot \
  -DarchetypeArtifactId=hexagonal-archetype \
  -DarchetypeVersion=3.3.x
```
