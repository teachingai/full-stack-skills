# æ•´æ´æ¶æ„ï¼ˆClean Architectureï¼‰ç›®å½•ç»“æ„

## ğŸ“‹ ç›®å½•

1. [å•ä½“å·¥ç¨‹ç›®å½•ç»“æ„](#å•ä½“å·¥ç¨‹ç›®å½•ç»“æ„)
2. [å¤§å‹å¾®æœåŠ¡å·¥ç¨‹ç›®å½•ç»“æ„](#å¤§å‹å¾®æœåŠ¡å·¥ç¨‹ç›®å½•ç»“æ„)
3. [æ¶æ„åŸåˆ™ä¸ä¾èµ–å…³ç³»](#æ¶æ„åŸåˆ™ä¸ä¾èµ–å…³ç³»)
4. [æ•´æ´æ¶æ„æ ¸å¿ƒæ¦‚å¿µ](#æ•´æ´æ¶æ„æ ¸å¿ƒæ¦‚å¿µ)

---

## ğŸ¢ å•ä½“å·¥ç¨‹ç›®å½•ç»“æ„

**é€‚ç”¨åœºæ™¯**: ä¸­å°å‹é¡¹ç›®ï¼Œéœ€è¦é«˜åº¦è§£è€¦å’Œå¯æµ‹è¯•æ€§

```
order-service/                                    # è®¢å•æœåŠ¡ï¼ˆå•ä½“åº”ç”¨ï¼‰
â”œâ”€â”€ ğŸ“ src/
â”‚   â”œâ”€â”€ ğŸ“ main/
â”‚   â”‚   â”œâ”€â”€ ğŸ“ java/io/ddd4j/order/
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ domain/                       # é¢†åŸŸå±‚ï¼ˆæœ€å†…å±‚ï¼‰
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ entity/                   # ä¸šåŠ¡å®ä½“
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Order.java               # è®¢å•å®ä½“
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ id: EntityId
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ customer: Customer
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ items: List<OrderItem>
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ status: OrderStatus
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ total: Money
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ place()
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ pay(Money)
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ cancel()
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ validateBusinessRules()
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderItem.java           # è®¢å•é¡¹å®ä½“
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ product: Product
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ quantity: Quantity
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ price: Money
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ updateQuantity(Quantity)
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Customer.java            # å®¢æˆ·å®ä½“
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ id: CustomerId
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ name: CustomerName
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ email: Email
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ register()
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Payment.java             # æ”¯ä»˜å®ä½“
â”‚   â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ id: PaymentId
â”‚   â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ amount: Money
â”‚   â”‚   â”‚   â”‚   â”‚       â””â”€â”€ status: PaymentStatus
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ valueobject/              # å€¼å¯¹è±¡
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Money.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ amount: BigDecimal
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ currency: Currency
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ add(Money): Money
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ subtract(Money): Money
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ equals(): boolean
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Email.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ address: String
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ validate(): void
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Quantity.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ value: int
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ add(Quantity): Quantity
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderId.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CustomerId.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProductId.java
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ OrderStatus.java
â”‚   â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ PENDING, CONFIRMED, PAID, SHIPPED, CANCELLED
â”‚   â”‚   â”‚   â”‚   â”‚       â””â”€â”€ canTransitionTo(OrderStatus)
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ service/                  # é¢†åŸŸæœåŠ¡
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderDomainService.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ calculateDiscount(Order): Money
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ validateOrder(Order): boolean
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PricingService.java
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ InventoryService.java
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ repository/               # ä»“å‚¨æ¥å£ï¼ˆé¢†åŸŸå±‚å®šä¹‰ï¼‰
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderRepository.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ save(Order): Order
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ findById(OrderId): Order
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ findAll(): List<Order>
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CustomerRepository.java
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ProductRepository.java
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ event/                    # é¢†åŸŸäº‹ä»¶
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DomainEvent.java         # åŸºç¡€äº‹ä»¶
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ occurredOn: Instant
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ version: Long
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderEvents.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderCreatedEvent.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderPaidEvent.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ OrderCancelledEvent.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ CustomerEvents.java
â”‚   â”‚   â”‚   â”‚   â”‚       â””â”€â”€ CustomerRegisteredEvent.java
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ exception/                # é¢†åŸŸå¼‚å¸¸
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ DomainException.java
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ BusinessRuleException.java
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ ValidationException.java
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ application/                  # åº”ç”¨å±‚ï¼ˆç”¨ä¾‹å±‚ï¼‰
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ usecase/                  # ç”¨ä¾‹/äº¤äº’å™¨
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ order/                  # è®¢å•ç”¨ä¾‹
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CreateOrderUseCase.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ @Component
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ execute(CreateOrderRequest): CreateOrderResponse
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ validate(CreateOrderRequest): void
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ GetOrderUseCase.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ execute(GetOrderRequest): OrderResponse
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ execute(OrderId): Order
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PayOrderUseCase.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ CancelOrderUseCase.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ customer/               # å®¢æˆ·ç”¨ä¾‹
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RegisterCustomerUseCase.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ GetCustomerUseCase.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ UpdateCustomerUseCase.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ payment/                # æ”¯ä»˜ç”¨ä¾‹
â”‚   â”‚   â”‚   â”‚   â”‚       â””â”€â”€ ProcessPaymentUseCase.java
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ ports/                    # ç«¯å£ï¼ˆæ¥å£ï¼‰
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ input/                  # è¾“å…¥ç«¯å£
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ InputPort.java         # æ ‡è®°æ¥å£
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ execute(): Response
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderInputPort.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CustomerInputPort.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ PaymentInputPort.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ output/                 # è¾“å‡ºç«¯å£
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OutputPort.java        # æ ‡è®°æ¥å£
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderOutputPort.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CustomerOutputPort.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProductOutputPort.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PaymentOutputPort.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ NotificationOutputPort.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ gateways/                # ç½‘å…³æ¥å£
â”‚   â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ IdGenerator.java
â”‚   â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ DateTimeGateway.java
â”‚   â”‚   â”‚   â”‚   â”‚       â””â”€â”€ CryptoGateway.java
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ dto/                      # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ request/              # è¯·æ±‚DTO
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CreateOrderRequest.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ customerName: String
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ items: List<OrderItemRequest>
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ shippingAddress: String
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PayOrderRequest.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ GetOrderRequest.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ RegisterCustomerRequest.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ response/             # å“åº”DTO
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CreateOrderResponse.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ orderId: String
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ status: String
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderResponse.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CustomerResponse.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ApiResponse.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ internal/             # å†…éƒ¨DTO
â”‚   â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ OrderDTO.java
â”‚   â”‚   â”‚   â”‚   â”‚       â””â”€â”€ CustomerDTO.java
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ service/                  # åº”ç”¨æœåŠ¡ï¼ˆåè°ƒç”¨ä¾‹ï¼‰
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderApplicationService.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ createOrder(CreateOrderRequest): OrderDTO
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ CustomerApplicationService.java
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ exception/                # åº”ç”¨å±‚å¼‚å¸¸
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ ApplicationException.java
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ UseCaseException.java
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ ValidationException.java
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ infrastructure/               # åŸºç¡€è®¾æ–½å±‚ï¼ˆæœ€å¤–å±‚ï¼‰
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ persistence/              # æŒä¹…åŒ–å®ç°
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ repository/           # ä»“å‚¨å®ç°
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderRepositoryImpl.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ @Repository
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ implements OrderOutputPort
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CustomerRepositoryImpl.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ProductRepositoryImpl.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ mapper/               # æ•°æ®æ˜ å°„å™¨
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderMapper.java       # MyBatis Mapperæ¥å£
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderDataMapper.java  # DO<->Entityè½¬æ¢
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ CustomerMapper.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ entity/               # æŒä¹…åŒ–å®ä½“
â”‚   â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ OrderEntity.java
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ @Entity
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ @Table("orders")
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ toDomain(): Order
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚   â””â”€â”€ toEntity(Order): OrderEntity
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚
â”‚   â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ CustomerEntity.java
â”‚   â”‚   â”‚   â”‚   â”‚       â””â”€â”€ ProductEntity.java
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ web/                      # Webå±‚å®ç°
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ controller/           # æ§åˆ¶å™¨
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderController.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ @RestController
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ @RequestMapping("/api/orders")
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ createOrder(@RequestBody): ResponseEntity
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CustomerController.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ PaymentController.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ dto/                  # Web DTO
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ request/
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CreateOrderWebRequest.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ PayOrderWebRequest.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ response/
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ OrderWebResponse.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ assembler/            # DTOè£…é…å™¨
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ OrderWebAssembler.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚       â””â”€â”€ CustomerWebAssembler.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ filter/               # è¿‡æ»¤å™¨
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AuthenticationFilter.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ LoggingFilter.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ CorsFilter.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ interceptor/          # æ‹¦æˆªå™¨
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ PerformanceInterceptor.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ advice/               # å¼‚å¸¸å¤„ç†
â”‚   â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ GlobalExceptionHandler.java
â”‚   â”‚   â”‚   â”‚   â”‚       â””â”€â”€ ErrorResponse.java
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ external/                 # å¤–éƒ¨æœåŠ¡é€‚é…å™¨
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ payment/              # æ”¯ä»˜æœåŠ¡
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ StripePaymentAdapter.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ @Service
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ implements PaymentOutputPort
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PayPalPaymentAdapter.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ AlipayPaymentAdapter.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ notification/         # é€šçŸ¥æœåŠ¡
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ EmailNotificationAdapter.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SMSNotificationAdapter.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ PushNotificationAdapter.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ messaging/            # æ¶ˆæ¯é˜Ÿåˆ—
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RabbitMQAdapter.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ KafkaAdapter.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ EventPublisherAdapter.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ storage/              # å­˜å‚¨æœåŠ¡
â”‚   â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ S3StorageAdapter.java
â”‚   â”‚   â”‚   â”‚   â”‚       â””â”€â”€ LocalStorageAdapter.java
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ config/                   # é…ç½®ç±»
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ persistence/          # æŒä¹…åŒ–é…ç½®
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ JpaConfig.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DataSourceConfig.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ TransactionConfig.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ web/                  # Webé…ç½®
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ WebConfig.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SecurityConfig.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ SwaggerConfig.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ external/             # å¤–éƒ¨æœåŠ¡é…ç½®
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PaymentConfig.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ NotificationConfig.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ MessagingConfig.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ UseCaseConfig.java       # ç”¨ä¾‹é…ç½®
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ BeanConfig.java
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ModuleConfig.java
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ security/                 # å®‰å…¨å®ç°
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ JwtTokenProvider.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PasswordEncoderImpl.java
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ SecurityContextImpl.java
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ logging/                  # æ—¥å¿—å®ç°
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ LoggingAdapter.java
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ AuditLogger.java
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ interfaces/                   # æ¥å£é€‚é…å™¨å±‚ï¼ˆå¯é€‰åˆ†ç¦»ï¼‰
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ adapters/                 # é€‚é…å™¨
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ web/                  # Webé€‚é…å™¨
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderWebAdapter.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ CustomerWebAdapter.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ cli/                  # å‘½ä»¤è¡Œé€‚é…å™¨
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ CommandLineAdapter.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ message/              # æ¶ˆæ¯é€‚é…å™¨
â”‚   â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ KafkaConsumerAdapter.java
â”‚   â”‚   â”‚   â”‚   â”‚       â””â”€â”€ RabbitMQConsumerAdapter.java
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ presenters/              # å±•ç¤ºå™¨
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ OrderPresenter.java
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ CustomerPresenter.java
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ OrderApplication.java           # åº”ç”¨å¯åŠ¨ç±»
â”‚   â”‚   â”‚       â”œâ”€â”€ @SpringBootApplication
â”‚   â”‚   â”‚       â”œâ”€â”€ main()
â”‚   â”‚   â”‚       â””â”€â”€ configure()
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ ğŸ“ resources/
â”‚   â”‚       â”œâ”€â”€ application.yml
â”‚   â”‚       â”œâ”€â”€ application-dev.yml
â”‚   â”‚       â”œâ”€â”€ application-prod.yml
â”‚   â”‚       â”œâ”€â”€ ğŸ“ db/
â”‚   â”‚       â”‚   â”œâ”€â”€ migration/
â”‚   â”‚       â”‚   â””â”€â”€ seed/
â”‚   â”‚       â”œâ”€â”€ ğŸ“ i18n/
â”‚   â”‚       â”‚   â””â”€â”€ messages.properties
â”‚   â”‚       â”œâ”€â”€ ğŸ“ templates/
â”‚   â”‚       â”‚   â””â”€â”€ email/
â”‚   â”‚       â”œâ”€â”€ logback-spring.xml
â”‚   â”‚       â””â”€â”€ banner.txt
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ test/
â”‚       â”œâ”€â”€ ğŸ“ unit/
â”‚       â”‚   â”œâ”€â”€ ğŸ“ domain/
â”‚       â”‚   â”‚   â”œâ”€â”€ OrderTest.java
â”‚       â”‚   â”‚   â””â”€â”€ MoneyTest.java
â”‚       â”‚   â”œâ”€â”€ ğŸ“ application/
â”‚       â”‚   â”‚   â””â”€â”€ CreateOrderUseCaseTest.java
â”‚       â”‚   â””â”€â”€ ğŸ“ infrastructure/
â”‚       â”‚       â””â”€â”€ OrderRepositoryImplTest.java
â”‚       â”‚
â”‚       â”œâ”€â”€ ğŸ“ integration/
â”‚       â”‚   â””â”€â”€ OrderIntegrationTest.java
â”‚       â”‚
â”‚       â””â”€â”€ ğŸ“ e2e/
â”‚           â””â”€â”€ ApiE2ETest.java
â”‚
â”œâ”€â”€ ğŸ“ docker/
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ docker-compose.yml
â”‚
â”œâ”€â”€ pom.xml
â”œâ”€â”€ README.md
â””â”€â”€ .gitignore
```

---

## ğŸ¢ å¤§å‹å¾®æœåŠ¡å·¥ç¨‹ç›®å½•ç»“æ„

**é€‚ç”¨åœºæ™¯**: å¤§å‹ä¼ä¸šé¡¹ç›®ï¼Œéœ€è¦é«˜åº¦è§£è€¦ã€å¯æµ‹è¯•æ€§å’Œç‹¬ç«‹éƒ¨ç½²

```
ecommerce-platform/                                  # ç”µå•†å¹³å°ï¼ˆå¾®æœåŠ¡çˆ¶å·¥ç¨‹ï¼‰
â”‚
â”œâ”€â”€ ğŸ“ order-service/                              # è®¢å•æœåŠ¡ï¼ˆç‹¬ç«‹å¾®æœåŠ¡ï¼‰
â”‚   â”œâ”€â”€ ğŸ“ order-domain/                           # é¢†åŸŸæ¨¡å—ï¼ˆJARï¼‰
â”‚   â”‚   â”œâ”€â”€ ğŸ“ src/main/java/io/ddd4j/order/domain/
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ entity/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Order.java                     # èšåˆæ ¹
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderItem.java
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Payment.java
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ valueobject/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderId.java
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Money.java
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ OrderStatus.java
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ service/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ OrderDomainService.java
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ repository/           # ä»“å‚¨æ¥å£
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderRepository.java
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ CustomerRepository.java
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ event/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderCreatedEvent.java
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ OrderPaidEvent.java
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ exception/
â”‚   â”‚   â”‚       â””â”€â”€ DomainException.java
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ pom.xml
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ order-application/                      # åº”ç”¨æ¨¡å—ï¼ˆJARï¼‰
â”‚   â”‚   â”œâ”€â”€ ğŸ“ src/main/java/io/ddd4j/order/application/
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ usecase/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ order/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CreateOrderUseCase.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ GetOrderUseCase.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PayOrderUseCase.java
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ CancelOrderUseCase.java
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ customer/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ GetCustomerUseCase.java
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ payment/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ ProcessPaymentUseCase.java
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ ports/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ input/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderInputPort.java
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ CustomerInputPort.java
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ output/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ OrderOutputPort.java
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ CustomerOutputPort.java
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ PaymentOutputPort.java
â”‚   â”‚   â”‚   â”‚       â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ dto/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ request/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CreateOrderRequest.java
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ GetOrderRequest.java
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ response/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderResponse.java
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ CustomerResponse.java
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ internal/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ OrderDTO.java
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ service/
â”‚   â”‚   â”‚       â””â”€â”€ OrderApplicationService.java
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ pom.xml
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ order-infrastructure/                   # åŸºç¡€è®¾æ–½æ¨¡å—ï¼ˆJARï¼‰
â”‚   â”‚   â”œâ”€â”€ ğŸ“ src/main/java/io/ddd4j/order/infrastructure/
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ persistence/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ repository/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderRepositoryImpl.java    # å®ç°OrderOutputPort
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ CustomerRepositoryImpl.java
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ mapper/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderMapper.java
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ OrderDataMapper.java
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ entity/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ OrderEntity.java
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ web/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ controller/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderController.java
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ CustomerController.java
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ dto/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ CreateOrderWebRequest.java
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ OrderWebResponse.java
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ external/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ payment/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ StripePaymentAdapter.java  # å®ç°PaymentOutputPort
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ PayPalPaymentAdapter.java
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ messaging/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ KafkaEventPublisher.java   # å®ç°EventPublisherOutputPort
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ RabbitMQEventConsumer.java
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ notification/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ EmailNotificationAdapter.java
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ config/
â”‚   â”‚   â”‚       â”œâ”€â”€ DatabaseConfig.java
â”‚   â”‚   â”‚       â”œâ”€â”€ WebConfig.java
â”‚   â”‚   â”‚       â””â”€â”€ SecurityConfig.java
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ pom.xml
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ order-interfaces/                       # æ¥å£é€‚é…å™¨æ¨¡å—ï¼ˆJARï¼‰
â”‚   â”‚   â”œâ”€â”€ ğŸ“ src/main/java/io/ddd4j/order/interfaces/
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ adapters/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ web/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ OrderWebAdapter.java
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ cli/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ CommandLineAdapter.java
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ message/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ KafkaConsumerAdapter.java
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ presenters/
â”‚   â”‚   â”‚       â””â”€â”€ OrderPresenter.java
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ pom.xml
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ order-start/                             # å¯åŠ¨æ¨¡å—ï¼ˆå¯æ‰§è¡ŒJARï¼‰
â”‚   â”‚   â”œâ”€â”€ ğŸ“ src/main/java/io/ddd4j/order/
â”‚   â”‚   â”‚   â””â”€â”€ OrderApplication.java
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“ src/main/resources/
â”‚   â”‚   â”‚   â”œâ”€â”€ application.yml
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ mapper/
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ pom.xml
â”‚   â”‚
â”‚   â””â”€â”€ pom.xml                                     # è®¢å•æœåŠ¡çˆ¶POM
â”‚
â”œâ”€â”€ ğŸ“ customer-service/                           # å®¢æˆ·æœåŠ¡ï¼ˆç‹¬ç«‹å¾®æœåŠ¡ï¼‰
â”‚   â”œâ”€â”€ ğŸ“ customer-domain/
â”‚   â”‚   â””â”€â”€ ğŸ“ src/main/java/io/ddd4j/customer/domain/
â”‚   â”‚       â”œâ”€â”€ ğŸ“ entity/
â”‚   â”‚       â”‚   â””â”€â”€ Customer.java
â”‚   â”‚       â””â”€â”€ ğŸ“ valueobject/
â”‚   â”‚           â””â”€â”€ Email.java
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ customer-application/
â”‚   â”‚   â””â”€â”€ ğŸ“ src/main/java/io/ddd4j/customer/application/
â”‚   â”‚       â””â”€â”€ ğŸ“ usecase/
â”‚   â”‚           â””â”€â”€ RegisterCustomerUseCase.java
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ customer-infrastructure/
â”‚   â”‚   â””â”€â”€ ğŸ“ src/main/java/io/ddd4j/customer/infrastructure/
â”‚   â”‚       â””â”€â”€ ğŸ“ persistence/
â”‚   â”‚           â””â”€â”€ CustomerRepositoryImpl.java
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ customer-interfaces/
â”‚   â”‚   â””â”€â”€ ğŸ“ src/main/java/io/ddd4j/customer/interfaces/
â”‚   â”‚       â””â”€â”€ ğŸ“ adapters/
â”‚   â”‚           â””â”€â”€ web/
â”‚   â”‚               â””â”€â”€ CustomerWebAdapter.java
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ customer-start/
â”‚       â””â”€â”€ ğŸ“ src/main/java/io/ddd4j/customer/
â”‚           â””â”€â”€ CustomerApplication.java
â”‚
â”œâ”€â”€ ğŸ“ payment-service/                            # æ”¯ä»˜æœåŠ¡ï¼ˆç‹¬ç«‹å¾®æœåŠ¡ï¼‰
â”‚   â”œâ”€â”€ ğŸ“ payment-domain/
â”‚   â”œâ”€â”€ ğŸ“ payment-application/
â”‚   â”œâ”€â”€ ğŸ“ payment-infrastructure/
â”‚   â”œâ”€â”€ ğŸ“ payment-interfaces/
â”‚   â””â”€â”€ ğŸ“ payment-start/
â”‚
â”œâ”€â”€ ğŸ“ product-service/                            # äº§å“æœåŠ¡ï¼ˆç‹¬ç«‹å¾®æœåŠ¡ï¼‰
â”‚   â”œâ”€â”€ ğŸ“ product-domain/
â”‚   â”œâ”€â”€ ğŸ“ product-application/
â”‚   â”œâ”€â”€ ğŸ“ product-infrastructure/
â”‚   â”œâ”€â”€ ğŸ“ product-interfaces/
â”‚   â””â”€â”€ ğŸ“ product-start/
â”‚
â”œâ”€â”€ ğŸ“ shared-kernel/                              # å…±äº«å†…æ ¸
â”‚   â”œâ”€â”€ ğŸ“ shared-domain/                          # å…±äº«é¢†åŸŸæ¨¡å—
â”‚   â”‚   â””â”€â”€ ğŸ“ src/main/java/io/ddd4j/shared/domain/
â”‚   â”‚       â”œâ”€â”€ ğŸ“ entity/
â”‚   â”‚       â”‚   â””â”€â”€ BaseEntity.java
â”‚   â”‚       â””â”€â”€ ğŸ“ valueobject/
â”‚   â”‚           â”œâ”€â”€ Money.java
â”‚   â”‚           â””â”€â”€ Email.java
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ shared-application/                    # å…±äº«åº”ç”¨æ¨¡å—
â”‚   â”‚   â””â”€â”€ ğŸ“ src/main/java/io/ddd4j/shared/application/
â”‚   â”‚       â””â”€â”€ dto/
â”‚   â”‚           â””â”€â”€ BaseDTO.java
â”‚   â”‚
â”‚   â””â”€â”€ pom.xml
â”‚
â”œâ”€â”€ ğŸ“ gateway/                                    # APIç½‘å…³
â”‚   â””â”€â”€ ğŸ“ src/main/java/io/ddd4j/gateway/
â”‚       â”œâ”€â”€ GatewayApplication.java
â”‚       â””â”€â”€ ğŸ“ filter/
â”‚           â”œâ”€â”€ AuthFilter.java
â”‚           â””â”€â”€ RateLimitFilter.java
â”‚
â”œâ”€â”€ ğŸ“ docker/
â”‚   â”œâ”€â”€ docker-compose.yml
â”‚   â””â”€â”€ ğŸ“ docker/
â”‚       â”œâ”€â”€ order-service/
â”‚       â”œâ”€â”€ customer-service/
â”‚       â””â”€â”€ gateway/
â”‚
â”œâ”€â”€ ğŸ“ k8s/
â”‚   â”œâ”€â”€ ğŸ“ order-service/
â”‚   â”‚   â”œâ”€â”€ deployment.yaml
â”‚   â”‚   â””â”€â”€ service.yaml
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ customer-service/
â”‚   â””â”€â”€ ğŸ“ gateway/
â”‚
â”œâ”€â”€ pom.xml
â”œâ”€â”€ README.md
â””â”€â”€ .gitignore
```

---

## ğŸ— æ¶æ„åŸåˆ™ä¸ä¾èµ–å…³ç³»

### æ•´æ´æ¶æ„åŒå¿ƒåœ†

```
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚       Interface Adapters            â”‚  â† æœ€å¤–å±‚
        â”‚   (Controllers, Presenters,        â”‚
        â”‚    Gateways, HTTP, DB, UI, etc)   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†‘
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚       Use Cases / Application       â”‚
        â”‚   (Business Use Cases, Application  â”‚
        â”‚         Services, Input Port)       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†‘
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚      Entities / Business Rules     â”‚  â† æœ€å†…å±‚
        â”‚ (Enterprise Business Rules,         â”‚
        â”‚   Core Domain Models, Entities)    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¾èµ–è§„åˆ™

```
Interface Adapters â†’ Use Cases â†’ Entities
```

- **Entitiesï¼ˆæœ€å†…å±‚ï¼‰**ï¼šæ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼Œæ— ä»»ä½•å¤–éƒ¨ä¾èµ–
- **Use Casesï¼ˆåº”ç”¨å±‚ï¼‰**ï¼šä¾èµ–Entitiesï¼Œå®šä¹‰è¾“å‡ºç«¯å£æ¥å£
- **Interface Adaptersï¼ˆæœ€å¤–å±‚ï¼‰**ï¼šå®ç°Use Caseså®šä¹‰çš„ç«¯å£ï¼Œå¤„ç†æŠ€æœ¯ç»†èŠ‚

---

## ğŸ¯ æ•´æ´æ¶æ„æ ¸å¿ƒæ¦‚å¿µ

### 1. å®ä½“ï¼ˆEntitiesï¼‰

ä¼ä¸šçº§ä¸šåŠ¡è§„åˆ™ï¼Œæœ€å†…å±‚ï¼Œå®Œå…¨ç‹¬ç«‹ï¼š

```java
// domain/entity/Order.java
public class Order {

    private final OrderId id;
    private CustomerId customerId;
    private List<OrderItem> items;
    private OrderStatus status;
    private Money total;

    public Order(OrderId id, CustomerId customerId, List<OrderItem> items) {
        this.id = id;
        this.customerId = customerId;
        this.items = new ArrayList<>(items);
        this.status = OrderStatus.PENDING;
        this.total = calculateTotal();
        validate();
    }

    public void place() {
        if (status != OrderStatus.PENDING) {
            throw new BusinessRuleException("Order can only be placed from pending status");
        }
        this.status = OrderStatus.CONFIRMED;
    }

    public void pay(Money amount) {
        if (status != OrderStatus.CONFIRMED) {
            throw new BusinessRuleException("Order must be confirmed before payment");
        }
        if (!total.equals(amount)) {
            throw new BusinessRuleException("Payment amount does not match order total");
        }
        this.status = OrderStatus.PAID;
    }

    public void cancel() {
        if (status == OrderStatus.SHIPPED || status == OrderStatus.DELIVERED) {
            throw new BusinessRuleException("Cannot cancel shipped or delivered order");
        }
        this.status = OrderStatus.CANCELLED;
    }

    private Money calculateTotal() {
        return items.stream()
            .map(item -> item.getPrice().multiply(item.getQuantity()))
            .reduce(Money.ZERO, Money::add);
    }

    private void validate() {
        if (customerId == null) {
            throw new ValidationException("Customer ID is required");
        }
        if (items == null || items.isEmpty()) {
            throw new ValidationException("Order must have at least one item");
        }
    }
}
```

### 2. ç”¨ä¾‹ï¼ˆUse Casesï¼‰

åº”ç”¨ç‰¹å®šä¸šåŠ¡è§„åˆ™ï¼Œåè°ƒEntitiesï¼š

```java
// application/usecase/order/CreateOrderUseCase.java
@Component
public class CreateOrderUseCase {

    private final OrderOutputPort orderOutputPort;
    private final CustomerOutputPort customerOutputPort;
    private final ProductOutputPort productOutputPort;

    public CreateOrderResponse execute(CreateOrderRequest request) {
        // 1. éªŒè¯å®¢æˆ·
        Customer customer = customerOutputPort.findById(request.getCustomerId())
            .orElseThrow(() -> new CustomerNotFoundException(request.getCustomerId()));

        // 2. è·å–äº§å“
        List<Product> products = productOutputPort.findByIds(request.getProductIds());

        // 3. åˆ›å»ºè®¢å•å®ä½“
        Order order = new Order(
            OrderId.generate(),
            customer.getId(),
            createOrderItems(request.getItems())
        );

        // 4. ä¿å­˜è®¢å•
        orderOutputPort.save(order);

        // 5. è¿”å›ç»“æœ
        return new CreateOrderResponse(
            order.getId().getValue(),
            order.getStatus().name()
        );
    }
}
```

### 3. è¾“å‡ºç«¯å£ï¼ˆOutput Portsï¼‰

åº”ç”¨å±‚å®šä¹‰çš„æ¥å£ï¼Œç”±å¤–å±‚å®ç°ï¼š

```java
// application/ports/output/OrderOutputPort.java
public interface OrderOutputPort {
    Order save(Order order);
    Optional<Order> findById(OrderId id);
    List<Order> findByCustomer(CustomerId customerId);
}

// application/ports/output/CustomerOutputPort.java
public interface CustomerOutputPort {
    Optional<Customer> findById(CustomerId id);
    boolean exists(CustomerId id);
}

// application/ports/output/PaymentOutputPort.java
public interface PaymentOutputPort {
    PaymentResult processPayment(PaymentInfo paymentInfo);
}
```

### 4. é€‚é…å™¨å®ç°

æœ€å¤–å±‚ï¼Œå®ç°ç«¯å£æ¥å£ï¼š

```java
// infrastructure/persistence/OrderRepositoryImpl.java
@Repository
public class OrderRepositoryImpl implements OrderOutputPort {

    private final OrderMapper orderMapper;

    @Override
    public Order save(Order order) {
        OrderEntity entity = toEntity(order);
        orderMapper.insert(entity);
        return toDomain(entity);
    }

    @Override
    public Optional<Order> findById(OrderId id) {
        OrderEntity entity = orderMapper.selectById(id.getValue());
        return Optional.ofNullable(toDomain(entity));
    }
}

// infrastructure/external/StripePaymentAdapter.java
@Service
public class StripePaymentAdapter implements PaymentOutputPort {

    private final StripeClient stripeClient;

    @Override
    public PaymentResult processPayment(PaymentInfo paymentInfo) {
        PaymentIntent intent = stripeClient.createPaymentIntent(
            paymentInfo.getAmount().getValue(),
            paymentInfo.getCurrency()
        );
        return new PaymentResult(intent.getId(), intent.getStatus());
    }
}

// infrastructure/web/OrderController.java
@RestController
@RequestMapping("/api/orders")
public class OrderController {

    private final CreateOrderUseCase createOrderUseCase;
    private final GetOrderUseCase getOrderUseCase;

    @PostMapping
    public ResponseEntity<CreateOrderWebResponse> createOrder(
        @RequestBody CreateOrderWebRequest request
    ) {
        CreateOrderRequest useCaseRequest = toUseCaseRequest(request);
        CreateOrderResponse response = createOrderUseCase.execute(useCaseRequest);
        return ResponseEntity.ok(toWebResponse(response));
    }
}
```

### 5. ä¾èµ–æ³¨å…¥é…ç½®

```java
// infrastructure/config/UseCaseConfig.java
@Configuration
public class UseCaseConfig {

    // Output Portå®ç°
    @Bean
    public OrderOutputPort orderOutputPort(OrderMapper orderMapper) {
        return new OrderRepositoryImpl(orderMapper);
    }

    @Bean
    public CustomerOutputPort customerOutputPort(CustomerMapper customerMapper) {
        return new CustomerRepositoryImpl(customerMapper);
    }

    @Bean
    public PaymentOutputPort paymentOutputPort(StripeClient stripeClient) {
        return new StripePaymentAdapter(stripeClient);
    }

    // Use Case Bean
    @Bean
    public CreateOrderUseCase createOrderUseCase(
        OrderOutputPort orderOutputPort,
        CustomerOutputPort customerOutputPort,
        ProductOutputPort productOutputPort
    ) {
        return new CreateOrderUseCase(
            orderOutputPort,
            customerOutputPort,
            productOutputPort
        );
    }
}
```

---

## ğŸ“š æƒå¨å‚è€ƒ

### æ•´æ´æ¶æ„åˆ›å§‹äºº
- **Robert C. Martin (Uncle Bob)** - æ•´æ´æ¶æ„åˆ›å§‹äºº

### æ ¸å¿ƒåŸåˆ™

1. **ä¾èµ–è§„åˆ™**ï¼šæºä»£ç ä¾èµ–å…³ç³»åªèƒ½æŒ‡å‘å†…éƒ¨ï¼Œå†…å±‚ä¸çŸ¥é“å¤–å±‚çš„ä»»ä½•ä¿¡æ¯
2. **å®ä½“ç‹¬ç«‹**ï¼šæœ€å†…å±‚çš„å®ä½“ä¸ä¾èµ–ä»»ä½•æ¡†æ¶ã€æ•°æ®åº“ã€UIç­‰å¤–éƒ¨æŠ€æœ¯
3. **ç”¨ä¾‹å°è£…**ï¼šåº”ç”¨ç‰¹å®šä¸šåŠ¡è§„åˆ™ï¼Œåè°ƒå®ä½“å®Œæˆä¸šåŠ¡ç›®æ ‡
4. **é€‚é…å™¨éš”ç¦»**ï¼šæœ€å¤–å±‚è´Ÿè´£æ•°æ®è½¬æ¢å’ŒæŠ€æœ¯å®ç°

### ä¸å…¶ä»–æ¶æ„çš„å…³ç³»

| æ¶æ„ | æ ¸å¿ƒç†å¿µ | ä¾èµ–æ–¹å‘ |
|------|---------|---------|
| æ•´æ´æ¶æ„ | åŒå¿ƒåœ†å±‚æ¬¡ç»“æ„ | Adapter â†’ Use Case â†’ Entity |
| å…­è¾¹å½¢æ¶æ„ | ç«¯å£å’Œé€‚é…å™¨ | Adapter â†’ Port â† Application |
| DDDåˆ†å±‚ | é¢†åŸŸé©±åŠ¨è®¾è®¡ | Interface â†’ Application â†’ Domain â† Infrastructure |

---

## ğŸ’¡ é€‰æ‹©å»ºè®®

### é€‰æ‹©æ•´æ´æ¶æ„çš„åœºæ™¯ï¼š
1. éœ€è¦é«˜åº¦çš„å¯æµ‹è¯•æ€§
2. ä¸šåŠ¡é€»è¾‘å¤æ‚ï¼Œéœ€è¦ç‹¬ç«‹æ¼”è¿›
3. æŠ€æœ¯æ ˆå¯èƒ½é¢‘ç¹æ›´æ¢
4. éœ€è¦æ¸…æ™°çš„æ¶æ„è¾¹ç•Œ

### ä¸é€‰æ‹©æ•´æ´æ¶æ„çš„åœºæ™¯ï¼š
1. ç®€å•CRUDåº”ç”¨
2. å›¢é˜Ÿå¯¹æ¶æ„ç†è§£ä¸è¶³
3. å¿«é€ŸåŸå‹å¼€å‘

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

```bash
# åˆ›å»ºæ•´æ´æ¶æ„é¡¹ç›®
mvn archetype:generate \
  -DarchetypeGroupId=io.ddd4j.boot \
  -DarchetypeArtifactId=clean-archetype \
  -DarchetypeVersion=3.3.x
```
