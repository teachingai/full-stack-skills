# {产品名称} - 需求分析文档 V1.0

> **文档说明**：
> - 本文档是需求分析阶段的产出物，用于明确产品功能需求和用户故事
> - 重点关注业务功能、用户场景、交互描述，不涉及技术实现细节
> - `{}` 包裹的内容为占位符，请替换为实际内容
> - 引用块 `>` 中的文字为填写指导，填写后可删除

---

## 1. 文档信息 (Document Info)

### 1.1 版本记录
| 版本号 | 修改日期 | 修改人 | 修改内容 | 备注 |
| :--- | :--- | :--- | :--- | :--- |
| V1.0.0 | {YYYY-MM-DD} | {姓名} | 初始版本 | - |

### 1.2 文档责任人
| 角色 | 姓名 | 职责 |
| :--- | :--- | :--- |
| 产品经理 | {姓名} | 需求分析、用户调研、文档输出 |
| 业务方 | {姓名} | 需求提出、需求确认 |
| UI设计师 | {姓名} | 参与需求评审、交互设计 |

---

## 2. 产品背景 (Product Background)

### 2.1 业务背景
> 描述为什么要做这个产品/功能，解决什么业务问题

**业务痛点**：
- {例如：门店订单处理效率低，经常出现订单遗漏}
- {例如：师傅抢单流程不顺畅，导致订单响应慢}
- {例如：门店无法实时掌握运营数据，影响决策}

**业务目标**：
- {例如：提升订单处理效率30%}
- {例如：减少订单遗漏率至5%以下}
- {例如：提升师傅接单率至80%以上}

### 2.2 目标用户
> 明确产品的目标用户群体

| 用户角色 | 用户描述 | 使用场景 | 核心诉求 |
| :--- | :--- | :--- | :--- |
| {门店老板} | {拥有门店管理权限，负责门店日常运营} | {每日查看订单，处理待接单订单，指派师傅} | {快速处理订单，提升门店运营效率} |
| {工作人员} | {门店普通员工，协助门店老板处理订单} | {查看订单列表，联系客户，协助处理订单} | {便捷查看订单信息，快速联系客户} |
| {师傅} | {提供上门服务的师傅} | {抢单，上报到达，开始服务，完成服务} | {快速抢单，便捷上报服务进度} |

### 2.3 产品定位
> 一句话描述产品的定位和价值

{例如：面向门店老板和师傅的XXX应用，帮助门店高效管理订单、师傅、客户等业务，提升门店运营效率和服务质量}

---

## 3. 用户故事 (User Stories)

### 3.1 {模块名称 - 例如：订单管理}

#### 用户故事1：{例如：门店老板查看待接单订单}

**作为** {门店老板}  
**我希望** {能够快速查看待接单的订单列表}  
**以便** {及时处理订单，避免订单遗漏}

**详细描述**：
- 门店老板每天上午9:00打开XXX应用，进入工单
- 查看"待接单"Tab，看到有5个新订单
- 每个订单卡片显示：订单类型、服务名称、订单金额、客户姓名、联系方式、服务时间、服务地址
- 点击订单卡片，查看订单详情（客户信息、服务地址、服务时间等）
- 根据订单信息，决定是指派师傅还是等待师傅抢单

**验收标准**：
- ✅ 能够看到待接单订单列表
- ✅ 订单卡片显示关键信息（服务名称、金额、客户信息、服务时间）
- ✅ 能够点击订单卡片查看详情
- ✅ 订单数量实时更新

---

#### 用户故事2：{例如：门店老板指派师傅}

**作为** {门店老板}  
**我希望** {能够为订单指派合适的师傅}  
**以便** {确保订单能够及时被处理}

**详细描述**：
- 门店老板在订单详情页，看到订单状态为"待接单"
- 点击"指派师傅"按钮，弹出师傅选择弹窗
- 弹窗显示当前门店下所有可用师傅列表（师傅姓名、等级、当前状态）
- 选择师傅后，点击确认，订单状态更新为"待服务"
- 被指派的师傅收到通知，可以在"待服务"Tab看到该订单

**验收标准**：
- ✅ 能够点击"指派师傅"按钮
- ✅ 能够看到师傅选择弹窗
- ✅ 能够选择师傅并确认
- ✅ 指派成功后，订单状态更新为"待服务"
- ✅ 被指派的师傅能够看到该订单

---

### 3.2 {模块名称 - 例如：数据统计}

#### 用户故事3：{例如：门店老板查看今日数据}

**作为** {门店老板}  
**我希望** {能够查看门店今日的运营数据}  
**以便** {了解门店经营状况，辅助决策}

**详细描述**：
- 门店老板打开"我的"页面，看到数据统计区域
- 显示三个关键指标：
  - 访客数：今日访问XXX应用或门店的UV数，下行显示【昨日 X】
  - 成交单量：今日已支付订单数，下行显示【昨日 X】
  - 成交金额：今日已支付订单的实收金额，下行显示【昨日 X】
- 点击任意数据统计项，跳转到数据详情页，查看更详细的数据分析

**验收标准**：
- ✅ 能够看到三个关键数据指标
- ✅ 每个指标显示今日数据和昨日对比
- ✅ 能够点击数据统计项跳转到详情页

---

## 4. 功能需求 (Functional Requirements)

### 4.1 {模块名称 - 例如：首页模块}

#### 4.1.1 {功能点名称 - 例如：搜索功能}

**功能ID**：{例如：M-01}  
**功能名称**：{例如：搜索查询}  
**功能描述**：
{例如：首页顶部显示搜索框，默认显示"全域用户运营课程"文案。用户点击搜索框后，跳转到搜索结果页，可以搜索课程、活动、文章等内容。}

**用户场景**：
- 场景1：用户想学习运营课程，点击搜索框，输入"用户运营"，查看相关课程
- 场景2：用户想了解最新活动，点击搜索框，切换到"活动"Tab，查看活动列表

**功能规则**：
1. **搜索框显示规则**：
   - 默认显示文案："全域用户运营课程"
   - 搜索框为只读状态，不可直接输入
   - 点击搜索框跳转到搜索结果页

2. **搜索结果规则**：
   - 支持4种搜索类型：课程、活动、文章、混合结果列表（默认）
   - 默认显示混合结果列表
   - 搜索结果按相关性排序
   - 支持分页加载，每页20条

3. **交互规则**：
   - 点击搜索框：跳转到搜索结果页
   - 搜索结果页支持Tab切换（课程/活动/文章/全部）
   - 支持下拉刷新、上拉加载更多

**数据来源**：
> 明确数据来源、数据表、字段映射

- **搜索服务**：调用搜索服务接口，传入关键词和类型参数
- **数据表**：`tp_child_lesson`（课程表）、`tp_activity`（活动表）、`tp_article`（文章表）
- **字段映射**：
  - 课程标题：`tp_child_lesson.name`
  - 课程图片：`tp_child_lesson.info`（多个OSS链接用逗号拼接，取第一个）

**数据展示**：
- 课程：显示课程标题、课程图片、学习人数
- 活动：显示活动标题、活动图片、活动时间
- 文章：显示文章标题、文章摘要、发布时间

**异常情况**：
- 无搜索结果：显示"暂无搜索结果"空状态
- 网络异常：显示"网络异常，请稍后重试"提示，支持重试
- 搜索关键词为空：显示默认推荐内容

> **【交互布局规范】**
> *   **布局**: {例如：顶部搜索框 + 内容区域}
> *   **尺寸**:
>     *   **搜索框高度**: `40px`
>     *   **搜索框圆角**: `20px`（高度的一半，形成胶囊形状）
>     *   **搜索图标**: `16px`，颜色 `#999999`，左侧内边距 `16px`
> *   **交互**:
>     *   **点击搜索框**: 跳转到搜索结果页
>     *   **搜索框为只读状态**: 不可直接输入

---

### 4.2 {模块名称 - 例如：工单模块}

#### 4.2.1 {功能点名称 - 例如：订单列表}

**功能描述**：
{例如：工单支持多状态Tab导航，展示订单列表。订单状态包括：待接单、待服务、待上门、服务中、待转派。每个Tab显示对应状态的订单数量，点击Tab切换订单列表。}

**用户场景**：
- 场景1：门店老板查看待接单订单，点击"待接单"Tab，看到5个待接单订单
- 场景2：门店老板查看服务中的订单，点击"服务中"Tab，看到3个服务中的订单

**功能规则**：
1. **Tab导航**：
   - Tab显示：待接单、待服务、待上门、服务中、待转派
   - 每个Tab显示订单数量，格式："待接单(10)"
   - 当前选中Tab字体高亮+蓝色，未选中为默认灰色
   - 点击Tab切换下方订单列表数据
   - 订单数量实时更新

2. **订单卡片显示**：
   - **订单类型标签**：显示"上门订单"或"服务订单"
   - **商品封面图**：显示服务项目的封面图
   - **服务名称**：显示服务项目的完整名称，超出部分换行显示
   - **订单金额**：显示订单的实付金额
   - **订单状态**：显示当前订单状态
   - **客户姓名**：显示客户姓名
   - **联系方式**：显示客户联系方式
   - **服务时长**：显示服务时长（单位：分钟）
   - **服务时间**：显示服务时间，格式化显示：
     - 今天：显示"今天 HH:mm–HH:mm"
     - 明天：显示"明天 HH:mm–HH:mm"
     - 其他日期：显示"MM月dd日 HH:mm–HH:mm"
   - **服务地址**：显示服务地址，多行展示，过长时自动换行
   - **客户备注**：显示客户备注，超过2行时默认折叠，点击展开/收起

3. **列表交互**：
   - 支持下拉刷新，刷新当前Tab的订单列表
   - 支持上拉加载更多，每页10-20条
   - 点击订单卡片跳转到订单详情页
   - 订单状态数量实时更新

**异常情况**：
- 网络异常：显示"网络异常，请稍后重试"提示，支持下拉刷新重试
- 无订单数据：显示"暂无订单"空状态
- 订单数据加载失败：显示"加载失败，请重试"提示，支持重试

---

## 5. 交互设计 (Interaction Design)

### 5.1 页面跳转规则
> 描述页面之间的跳转关系

| 来源页面 | 触发操作 | 目标页面 | 跳转方式 | 说明 |
| :--- | :--- | :--- | :--- | :--- |
| 首页 | 点击搜索框 | 搜索结果页 | 页面跳转 | 带搜索关键词参数 |
| 首页 | 点击Banner | 配置的URL | 页面跳转/外部链接 | 根据配置类型跳转 |
| 工单 | 点击订单卡片 | 订单详情页 | 页面跳转 | 带订单ID参数 |
| 我的页面 | 点击数据统计项 | 数据页面 | 页面跳转 | 带数据类型参数 |

### 5.2 交互反馈规则
> 描述用户操作的反馈方式

**点击反馈**：
- 按钮点击：显示点击态（颜色变化或阴影效果）
- 列表项点击：显示点击态，跳转页面
- 卡片点击：显示点击态，跳转详情页

**加载反馈**：
- 页面加载：显示Loading动画
- 列表加载：显示下拉刷新动画、上拉加载动画
- 操作提交：显示Loading提示，防止重复提交

**成功反馈**：
- 操作成功：显示Toast提示（如"抢单成功"、"切换成功"）
- 数据更新：自动刷新页面或列表

**失败反馈**：
- 网络异常：显示Toast提示"网络异常，请稍后重试"，支持重试
- 操作失败：显示Toast提示具体错误信息
- 数据加载失败：显示空状态，支持重试

### 5.3 弹窗交互规则
> 描述弹窗的显示和关闭规则

**确认弹窗**：
- 取消订单：点击"取消订单"按钮，弹出二次确认弹窗，确认后执行操作
- 抢单确认：点击"抢单"按钮，弹出确认弹窗，确认后执行抢单操作

**选择弹窗**：
- 门店切换：点击门店名称或小三角，弹出门店选择弹层，选择后关闭弹层并刷新页面
- 指派师傅：点击"指派师傅"按钮，弹出师傅选择弹层，选择后关闭弹层并更新订单

---

## 6. 数据需求 (Data Requirements)

### 6.1 数据指标定义
> 明确需要统计的数据指标

| 指标名称 | 指标定义 | 计算方式 | 说明 |
| :--- | :--- | :--- | :--- |
| 访客数 | 今日访问XXX应用或门店的UV数 | 统计今日访问XXX应用或门店的独立用户数 | 去重统计 |
| 成交单量 | 今日已支付订单数 | 统计今日已支付订单的数量 | 不含退款订单 |
| 成交金额 | 今日已支付订单的实收金额 | 统计今日已支付订单的金额总和 | 不含退款，单位元 |

### 6.2 数据展示规则
> 明确数据展示的格式和规则

**访客数**：
- 显示今日UV数
- 下行文案显示【昨日 X】
- 点击跳转"数据"页面

**成交单量**：
- 显示今日已支付订单数
- 下行文案显示【昨日 X】
- 点击跳转"数据"页面

**成交金额**：
- 显示今日已支付订单的实收金额，单位元，保留2位小数
- 超10万时用【1.2万】格式
- 下行文案显示【昨日 X】
- 点击跳转"数据"页面

---

## 7. 异常情况处理 (Exception Handling)

### 7.1 网络异常
- **表现**：接口请求失败，无法加载数据
- **处理方式**：
  - 显示Toast提示"网络异常，请稍后重试"
  - 提供重试按钮，支持手动重试
  - 列表页支持下拉刷新重试

### 7.2 数据异常
- **表现**：数据加载失败、数据格式错误
- **处理方式**：
  - 显示"加载失败，请重试"提示
  - 提供重试按钮
  - 空状态显示友好提示

### 7.3 权限异常
- **表现**：用户无权限访问、操作被拒绝
- **处理方式**：
  - 显示Toast提示"无权限访问"
  - 按钮置灰或隐藏
  - 引导用户联系门店老板

---

## 8. 验收标准 (Acceptance Criteria)

### 8.1 功能验收标准
> 明确每个功能的验收标准

**通用验收标准**：
1. ✅ 所有功能按照需求文档实现，无遗漏
2. ✅ 所有交互按照交互设计实现，体验流畅
3. ✅ 所有数据按照数据需求正确计算和显示
4. ✅ 所有异常情况按照异常处理规则正确处理

---

## 9. 附录 (Appendix)

### 9.1 术语表
> 定义文档中使用的专业术语

| 术语 | 定义 |
| :--- | :--- |
| UV | Unique Visitor，独立访客数 |
| Tab | 标签页，用于切换不同内容 |
| Toast | 轻量级提示，显示在页面顶部或底部 |

### 9.2 参考文档
> 列出参考的相关文档

- [产品调研模板](1、产品调研模板.md)
- [需求调研模板](2、需求调研模板.md)
- [技术调研模板](3、技术调研模板.md)
- [PRD文档模板](5、PRD文档模板.md)
- [UI 设计说明模板](7、UI%20设计说明模板.md)

### 9.3 变更记录
> 记录需求变更的历史

| 变更日期 | 变更内容 | 变更原因 | 变更人 |
| :--- | :--- | :--- | :--- |
| {YYYY-MM-DD} | {变更内容描述} | {变更原因} | {姓名} |

---

**文档版本**：V1.0.0  
**创建时间**：{YYYY-MM-DD}  
**最后更新**：{YYYY-MM-DD}  
**文档状态**：✅ 待评审 / ✅ 评审通过 / ✅ 设计中 / ✅ 已完成
